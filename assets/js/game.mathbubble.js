!function e(t,i,s){function o(r,a){if(!i[r]){if(!t[r]){var h="function"==typeof require&&require;if(!a&&h)return h(r,!0);if(n)return n(r,!0);var l=new Error("Cannot find module '"+r+"'");throw l.code="MODULE_NOT_FOUND",l}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){var i=t[r][1][e];return o(i?i:e)},u,u.exports,e,t,i,s)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<s.length;r++)o(s[r]);return o}({1:[function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var o=e("./states/boot"),n=s(o),r=e("./states/game"),a=s(r),h=e("./states/menu"),l=s(h),u=e("./states/preloader"),c=s(u),d=e("./states/gameover"),p=s(d),b=b=window.innerHeight>900?900:window.innerHeight,y=2*b/3;console.log(b,y,window.innerHeight,window.innerWidth);var f=new Phaser.Game(y,b,Phaser.AUTO,"MathBubble-game");f.state.add("boot",new n.default),f.state.add("game",new a.default),f.state.add("menu",new l.default),f.state.add("preloader",new c.default),f.state.add("gameover",new p.default),f.state.start("boot")},{"./states/boot":7,"./states/game":8,"./states/gameover":9,"./states/menu":10,"./states/preloader":11}],2:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(e){function t(e,i,n,r,a,h,l,u){s(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n,"side",r));return c.anchor.set(.5,.5),c.height=length?length:c.height,c.game.physics.p2.enable(c,!1),c.body.angle=a,c.body.setCollisionGroup(h),c.body.collides(l),c.body.kinematic=!0,c.s=u,c}return n(t,e),r(t,[{key:"update",value:function(){}}]),t}(Phaser.Sprite);i.default=a},{}],3:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(e){function t(e,i,n,r,a,h,l,u){s(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n,"r",r));return c.anchor.set(.5,.5),c.width=a?a:c.height,c.height=h?h:c.height,c.game.physics.p2.enable(c,!1),c.body.setCollisionGroup(l),c.body.collides(u),c.body.kinematic=!0,c.body.velocity.x=100,c.tint=16777215,c.blue=!1,c.red=!1,c.green=!1,c}return n(t,e),r(t,[{key:"update",value:function(){this.body.x>this.game.width||this.body.x<0?this.body.velocity.x*=-1:this.blue&&this.red?this.tint=16711935:this.blue&&this.green?this.tint=65535:this.red&&this.green?this.tint=16776960:this.blue?this.tint=255:this.red?this.tint=16711680:this.green&&(this.tint=65280)}}]),t}(Phaser.Sprite);i.default=a},{}],4:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(e){function t(e,i,n,r,a,h,l,u,c,d,p,b){s(this,t);var y=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n,"bubble",r)),f=y.game,g=y.game.width,m=y.game.height,v=[2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,5,5,5,6,7,8,9,10,11,12],w=[2,2,2,2,2,2,2,2,4,4,4,4,4,4,8,8,8,8,16,16,16,16,16,16,16,16,16],C=0,_=v.length-1,O=w.length-1,B=g/40+"px Arial",x={font:B,fill:"#ffffff",wordWrap:!0,wordWrapWidth:y.width};return y.width=g/10,y.height=m/15,y.anchor.set(.5,.5),y.tint=l?l:y.colorType(f.rnd.integerInRange(0,100)),y.color=y.colorConstant(y.tint),y.number=u?u:"red"===y.color||"blue"===y.color?v[f.rnd.integerInRange(C,_)]:w[f.rnd.integerInRange(C,O)],"clear"===y.color&&(y.number=50),y.label=f.add.text(0,0,y.number,x),y.label.anchor.set(.5,.5),y.beingDragged=!1,y.dragPointerId=0,y.changePhysics=!1,y.cg=c,y.cg2=d,y.bodyCG=p,y.sideCG=b,f.physics.p2.enable(y,!1),y.body.setCircle(y.width/2),y.setPhysics(y.cg,[y.cg,y.bodyCG,y.sideCG]),y.bounceSound=y.game.add.audio("ping3"),y.body.velocity.x=a?a:0,y.body.velocity.y=h?h:0,y}return n(t,e),r(t,[{key:"update",value:function(){this.label.x=Math.floor(this.x),this.label.y=Math.floor(this.y),this.beingDragged&&this.changePhysics?this.setPhysics(this.cg2,[this.cg,this.cg2,this.bodyCG]):!this.beingDragged&&this.changePhysics&&this.setPhysics(this.cg,[this.cg,this.bodyCG,this.sideCG]),this.constrainVelocity(),this.checkWorldBounds()}},{key:"constrainVelocity",value:function(){var e,t,i,s,o=75;i=this.body.data.velocity[0],s=this.body.data.velocity[1],t=i*i+s*s,t>o*o&&(e=Math.atan2(s,i),i=Math.cos(e)*o,s=Math.sin(e)*o,this.body.data.velocity[0]=i,this.body.data.velocity[1]=s)}},{key:"checkWorldBounds",value:function(){this.x>this.game.width/8+this.game.width&&(this.body.x=0),this.x<-this.game.width/8&&(this.body.x=this.game.width),this.y>this.game.height&&(console.log("down under"),this.body.y=this.game.height-this.game.height/8,this.body.x=this.game.width/2,this.body.velocity.x=0,this.body.velocity.y=0),this.y<-this.game.height/2&&(this.body.velocity.y=-this.body.velocity.y,console.log(this.body.velocity.y))}},{key:"resetPosition",value:function(){this.position.y=g.height}},{key:"setPhysics",value:function(e,t){this.body.setCollisionGroup(e),this.body.collides(t,this.bubbleCollisionFunction,this),this.changePhysics=!1}},{key:"bubbleCollisionFunction",value:function(e,t){var i=Math.sqrt(e.velocity.x*e.velocity.x+e.velocity.y*e.velocity.y)/3e3;this.bounceSound.volume=i}},{key:"colorType",value:function(e){return e>=0&&e<40?6713343:e>=40&&e<80?16737894:65331}},{key:"colorConstant",value:function(e){switch(e){case 6713343:return"blue";case 16737894:return"red";case 65331:return"green";case 5574543:return"purple";case 16777215:return"clear"}}}]),t}(Phaser.Sprite);i.default=a},{}],5:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(e){function t(e,i,n,r,a,h,l,u){s(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n,"side",r));return c.anchor.set(.5,.5),c.height=a,c.game.physics.p2.enable(c,!1),c.body.angle=h,c.body.setCollisionGroup(l),c.body.collides(u),c.body.kinematic=!0,c}return n(t,e),r(t,[{key:"update",value:function(){}}]),t}(Phaser.Sprite);i.default=a},{}],6:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(e){function t(e,i,n,r,a,h,l,u){s(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n,"side",r));return c.anchor.set(.5,.5),c.width=a,c.height=h,c.game.physics.p2.enable(c,!1),c.body.angle=l,c.body.setCollisionGroup(u),c.body.kinematic=!0,c}return n(t,e),r(t,[{key:"update",value:function(){}}]),t}(Phaser.Sprite);i.default=a},{}],7:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),r(t,[{key:"preload",value:function(){this.load.image("preloader","../assets/mathbubble/preloader.gif")}},{key:"create",value:function(){this.game.input.maxPointers=3,this.game.device.desktop?this.game.scale.pageAlignHorizontally=!0:(this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=240,this.game.scale.minHeight=520,this.game.scale.maxWidth=320,this.game.scale.maxHeight=960,this.game.scale.forceOrientation(!0),this.game.scale.pageAlignHorizontally=!0,this.game.scale.updateLayout(!0)),this.initGlobalVariables(),console.log(this.game.width,this.game.height),this.game.state.start("preloader")}},{key:"initGlobalVariables",value:function(){this.game.global={}}}]),t}(Phaser.State);i.default=a},{}],8:[function(e,t,i){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),h=e("../prefabs/bubble"),l=s(h),u=e("../prefabs/side"),c=s(u),d=e("../prefabs/smile"),p=s(d),b=e("../prefabs/body"),y=s(b),f=e("../prefabs/bonus"),g=s(f),m=function(e){function t(){return o(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),a(t,[{key:"create",value:function(){var e=this.game.width,t=this.game.height;this.game.canvas.oncontextmenu=function(e){e.preventDefault()},this.game.physics.startSystem(Phaser.Physics.P2JS),this.game.physics.p2.setImpactEvents(!0),this.game.physics.p2.restitution=.8,this.game.physics.p2.gravity.y=1e3,this.bubbleCG=this.game.physics.p2.createCollisionGroup(),this.bTouchCG=this.game.physics.p2.createCollisionGroup(),this.eyesCG=this.game.physics.p2.createCollisionGroup(),this.sideCG=this.game.physics.p2.createCollisionGroup(),this.leftScore=0,this.rightScore=10,this.offsetMultiplier=100,this.midBonusNumber=0,this.bubbles=this.game.add.group(),this.boundaries=this.game.add.group(),this.topBonuses=this.game.add.group(),this.p1=this.game.add.audio("ping1"),this.p2=this.game.add.audio("ping2"),this.p3=this.game.add.audio("ping3"),this.leftEye=this.game.add.sprite(e/5,t/6,"left"),this.leftEye.anchor.setTo(0,0),this.leftEye.width=e/3,this.leftEye.height=t/6,this.leftEye.tint=10066431,this.game.physics.p2.enable(this.leftEye,!1),this.leftEye.body.setCollisionGroup(this.eyesCG),this.leftEye.body.collides([this.bubbleCG,this.bTouchCG]),this.leftEye.body.kinematic=!0,this.leftEye.body.velocity.x=10,this.rightEye=this.game.add.sprite(e-e/5,t/6,"right"),this.rightEye.anchor.setTo(1,0),this.rightEye.width=e/3,this.rightEye.height=t/6,this.rightEye.tint=16751001,this.game.physics.p2.enable(this.rightEye,!1),this.rightEye.body.setCollisionGroup(this.eyesCG),this.rightEye.body.collides([this.bubbleCG,this.bTouchCG]),this.rightEye.body.kinematic=!0,this.rightEye.body.velocity.x=-10,this.createTopBonuses(e,t),this.midBonus=this.game.add.sprite(e/2,t-10*t/21,"r"),this.midBonus.width=t/20,this.midBonus.height=t/20,this.game.physics.p2.enable(this.midBonus,!0),this.midBonus.body.setCircle(this.midBonus.width/2),this.midBonus.body.setCollisionGroup(this.eyesCG),this.midBonus.body.collides([this.bubbleCG,this.bTouchCG]),this.midBonus.body.kinematic=!0,this.midBonus.body.angularVelocity=3,this.midBonusSetLocation=!1,this.midBonusActive=!1,this.mid1=new y.default(this.game,e/2,t-3*t/7,0,90,this.eyesCG,[this.bubbleCG,this.bTouchCG],this.p2),this.mid2=new y.default(this.game,e/2+this.mid1.height/3,t/2+t/75,0,-40,this.eyesCG,[this.bubbleCG,this.bTouchCG],this.p2),this.mid3=new y.default(this.game,e/2-this.mid1.height/3,t/2+t/75,0,40,this.eyesCG,[this.bubbleCG,this.bTouchCG],this.p2),this.boundaries.add(this.mid1),this.boundaries.add(this.mid2),this.boundaries.add(this.mid3),this.bott=new c.default(this.game,e/2,t-t/20,0,e-e/4,90,this.sideCG,[this.bubbleCG,this.sideCG]),this.bott2=new c.default(this.game,e/2,t-t/50,0,e-e/30,90,this.sideCG,[this.bubbleCG,this.sideCG]),this.bott2.tint=16711680,this.top=new c.default(this.game,e/2,t-t/4,0,3*e/5,90,this.sideCG,[this.bubbleCG,this.sideCG]),this.boundaries.add(this.bott),this.boundaries.add(this.bott2),this.boundaries.add(this.top),this.rightSide=new p.default(this.game,e-e/12,t-t/10,0,e/4,t/3,0,this.sideCG),this.rightSide.body.collides([this.bubbleCG,this.sideCG]),this.boundaries.add(this.rightSide),this.leftSide=new p.default(this.game,e/12,t-t/10,0,e/4,t/3,0,this.sideCG),this.leftSide.body.collides([this.bubbleCG,this.sideCG]),this.boundaries.add(this.leftSide),this.game.add.existing(this.boundaries),this.setupFlippers=!1,this.sidesAreFlippers=!1,this.leftFlipperFlipped=!1,this.rightFlipperFlipped=!1,this.flippersEnabled=!1,this.mouseBody=[new p2.Body,new p2.Body,new p2.Body,new p2.Body],this.mouseConstraint=[],this.game.physics.p2.world.addBody(this.mouseBody[0]),this.game.physics.p2.world.addBody(this.mouseBody[1]),this.game.physics.p2.world.addBody(this.mouseBody[2]),this.game.input.onDown.add(this.startDrag,this),this.game.input.onUp.add(this.stopDrag,this),this.game.input.addMoveCallback(this.movePointer,this),this.bubbleCounter=2e3,this.bubbleTimeout=0,this.eyeCounter=4e3,this.eyeTimeout=0,this.noseClippingTimeout=!1,this.gameOver=0,this.scoreDisplayLeft=this.game.add.text(this.leftEye.x,this.leftEye.y,this.leftScore,{font:Math.floor(t/10)+"px Arial",fill:"#ffffff"}),this.scoreDisplayLeft.anchor.setTo(.5),this.scoreDisplayRight=this.game.add.text(this.rightEye.x,this.rightEye.y,this.rightScore,{font:Math.floor(t/10)+"px Arial",fill:"#ffffff"}),this.scoreDisplayRight.anchor.setTo(.5),this.bonusNumber=this.game.add.text(this.midBonus.x,this.midBonus.y,this.midBonusNumber,{font:Math.floor(t/20)+"px Arial",fill:"#000000"}),this.bonusNumber.anchor.setTo(.5),this.bonusNumber.text=""}},{key:"setFlipperVelocity",value:function(e,t,i){e.body.velocity.x=t,e.body.angularVelocity=i}},{key:"setMidareaVelocity",value:function(e,t){this.mid2.body.velocity.x=-e,this.mid2.body.angularVelocity=-t,this.mid3.body.velocity.x=e,this.mid3.body.angularVelocity=t,this.midBonusSetLocation=!1}},{key:"createTopBonuses",value:function(e,t){this.eyelid1=new g.default(this.game,e/4,t/30,0,e/12,t/24,this.eyesCG,[this.bubbleCG,this.bTouchCG]),this.eyelid2=new g.default(this.game,e/2,t/30,0,e/12,t/24,this.eyesCG,[this.bubbleCG,this.bTouchCG]),this.eyelid3=new g.default(this.game,3*e/4,t/30,0,e/12,t/24,this.eyesCG,[this.bubbleCG,this.bTouchCG]),this.topBonuses.add(this.eyelid1),this.topBonuses.add(this.eyelid2),this.topBonuses.add(this.eyelid3),this.game.add.existing(this.topBonuses)}},{key:"createBubble",value:function(e,t,i,s,o,n){this.x=e?e:this.game.width/2+this.game.rnd.integerInRange(-this.game.width/4,this.game.width/4),this.y=t?t:this.game.height-this.game.height/8,this.sidesAreFlippers?this.color=16777215:this.color=o,this.bubbly=new l.default(this.game,this.x,this.y,0,-i,s,this.color,n,this.bubbleCG,this.bTouchCG,this.eyesCG,this.sideCG),this.bubbly.body.createBodyCallback(this.eyelid1,this.hitBonus,this),this.bubbly.body.createBodyCallback(this.eyelid2,this.hitBonus,this),this.bubbly.body.createBodyCallback(this.eyelid3,this.hitBonus,this),this.bubbly.body.createBodyCallback(this.midBonus,this.hitBonus,this),this.bubbly.body.createBodyCallback(this.leftEye,this.hitEyes,this),this.bubbly.body.createBodyCallback(this.rightEye,this.hitEyes,this),this.bubbly.body.createBodyCallback(this.mid1,this.cancelMovement,this),this.bubbly.body.createBodyCallback(this.mid2,this.hitNose,this),this.bubbly.body.createBodyCallback(this.mid3,this.hitNose,this),this.game.add.existing(this.bubbly),this.bubbles.add(this.bubbly),this.bubbles.length<5?this.bubbleCounter=3e3:this.bubbleCounter=1e4,this.sidesAreFlippers&&(this.bubbleCounter=1e3),15===this.bubbles.length&&console.log("15 bubbles of beer on the wall"),21===this.bubbles.length?(this.bubbleCounter=100,this.bubbleTimeout=this.game.time.now):25===this.bubbles.length?(this.top.body.dynamic=!0,this.rightSide.body.dynamic=!0,this.leftSide.body.dynamic=!0,this.scoreDisplayLeft.text="Err",this.scoreDisplayRight.text="Err"):this.bubbles.length>27&&this.game.state.start("menu")}},{key:"update",value:function(){this.scoreDisplayLeft.x=Math.floor(this.leftEye.x),this.scoreDisplayRight.x=Math.floor(this.rightEye.x),this.updateObjectLoops()}},{key:"updateObjectLoops",value:function(){this.game.time.pauseDuration>0&&(this.eyeTimeout+=this.game.time.pauseDuration,this.sidesTimeout+=this.game.time.pauseDuration,this.bubbleTimeout+=this.game.time.pauseDuration,this.game.time.pauseDuration=0),this.midBonusSetLocation&&this.mid2.body.angle<-40&&this.setMidareaVelocity(0,0),(this.mid2.body.angle>0||this.mid2.body.angle<-40)&&(this.mid2.body.velocity.x*=-1,this.mid2.body.angularVelocity*=-1,this.mid3.body.velocity.x*=-1,this.mid3.body.angularVelocity*=-1),(this.leftEye.position.x>2*this.game.width/7||this.leftEye.position.x<this.game.width/5)&&(this.eyeTimeout=this.time.now+this.eyeCounter,this.leftEye.body.velocity.x*=-1,this.rightEye.body.velocity.x*=-1),this.sidesAreFlippers?(this.leftFlipperFlipped&&this.leftSide.body.angle<-100&&this.setFlipperVelocity(this.leftSide,0,0),!this.leftFlipperFlipped&&this.leftSide.body.angle>-30&&this.setFlipperVelocity(this.leftSide,0,0),this.rightFlipperFlipped&&this.rightSide.body.angle>100&&this.setFlipperVelocity(this.rightSide,0,0),!this.rightFlipperFlipped&&this.rightSide.body.angle<30&&this.setFlipperVelocity(this.rightSide,0,0)):this.setupFlippers&&this.rightSide.body.angle>30?(this.flippersEnabled=!0,this.sidesAreFlippers=!0,this.setupFlippers=!1,this.setFlipperVelocity(this.leftSide,0,0),this.setFlipperVelocity(this.rightSide,0,0)):(this.rightSide.body.angle<0||this.rightSide.body.angle>30)&&(this.rightSide.body.velocity.x*=-1,this.leftSide.body.velocity.x*=-1,this.rightSide.body.angularVelocity*=-1,this.leftSide.body.angularVelocity*=-1),this.bubbleTimeout<this.game.time.now&&(this.timedIncrease=Math.abs(this.leftScore-this.rightScore)*this.offsetMultiplier,this.bubbleCounter-this.timedIncrease<500&&(this.timedIncrease=this.bubbleCounter-500),this.bubbleTimeout=this.game.time.now+(this.bubbleCounter-this.timedIncrease),console.log("bubblCreateTimeStamp: ",this.game.time.now,this.bubbleTimeout,"bubble counters",this.bubbleCounter,this.timedIncrease,this.bubbleCounter-this.timedIncrease),this.createBubble())}},{key:"startDrag",value:function(e){this.flippersEnabled&&(e.x>this.game.width/2?this.rightFlip():this.leftFlip());var t=[];this.bubbles.forEach(function(e){t.push(e.body)},this);var i=this.game.physics.p2.hitTest(e.position,t),s=[this.game.physics.p2.pxmi(e.position.x),this.game.physics.p2.pxmi(e.position.y)];if(i.length){var o=i[0],n=[0,0];o.toLocalFrame(n,s),o.parent.sprite.beingDragged=!0,o.parent.sprite.changePhysics=!0,o.parent.sprite.dragPointerId=e.id,this.mouseConstraint[e.id]=this.game.physics.p2.createRevoluteConstraint(this.mouseBody[e.id],[0,0],o,[this.game.physics.p2.mpxi(n[0]),this.game.physics.p2.mpxi(n[1])])}}},{key:"stopDrag",value:function(e,t){this.flippersEnabled&&(this.resetRightFlipper(),this.resetLeftFlipper());var i=void 0===e.id?e:e.id;this.game.physics.p2.removeConstraint(this.mouseConstraint[i]),void 0!==this.mouseConstraint[i]&&null!==this.mouseConstraint[i].bodyB.parent.sprite&&(this.mouseConstraint[i].bodyB.parent.sprite.beingDragged=!1,this.mouseConstraint[i].bodyB.parent.sprite.dragPointerId=0,this.mouseConstraint[i].bodyB.parent.sprite.changePhysics=!0)}},{key:"movePointer",value:function(e){var t=void 0!==e?e.id:1;this.mouseBody[t]&&(this.mouseBody[t].position[0]=this.game.physics.p2.pxmi(e.position.x),this.mouseBody[t].position[1]=this.game.physics.p2.pxmi(e.position.y))}},{key:"leftFlip",value:function(){this.setFlipperVelocity(this.leftSide,450,-10),this.leftFlipperFlipped=!0}},{key:"rightFlip",value:function(){this.setFlipperVelocity(this.rightSide,-450,10),this.rightFlipperFlipped=!0}},{key:"resetLeftFlipper",value:function(){this.setFlipperVelocity(this.leftSide,-225,5),this.leftFlipperFlipped=!1}},{key:"resetRightFlipper",value:function(){this.setFlipperVelocity(this.rightSide,225,-5),this.rightFlipperFlipped=!1}},{key:"setupBonusConditions",value:function(){this.setFlipperVelocity(this.leftSide,10,.2),this.setFlipperVelocity(this.rightSide,-10,-.2),console.log("set Bonus Conditions"),this.setMidareaVelocity(5,.7),this.midBonusActive=!0,this.game.time.events.add(2e4,this.resetBonusConditions,this),this.bonusNumber.text=this.midBonusNumber=this.game.rnd.integerInRange(7,21)}},{key:"resetBonusConditions",value:function(){this.createTopBonuses(this.game.width,this.game.height),this.setFlipperVelocity(this.leftSide,0,0),this.setFlipperVelocity(this.rightSide,0,0),this.resetBubblesBonusCollisions(),this.midBonusActive=!1,this.midBonusSetLocation=!0,this.bonusNumber.text=""}},{key:"setupBonusRound",value:function(){this.setupFlippers=!0,this.midBonusSetLocation=!1,this.bubbleTimeout=0,this.leftSide.body.angularVelocity*=5,this.leftSide.body.velocity.x*=5,this.rightSide.body.angularVelocity*=5,this.rightSide.body.velocity.x*=5,this.top.destroy(),this.game.time.events.add(1e4,this.resetBonus,this)}},{key:"resetBonus",value:function(){var e=this;console.log("end bonus round");var t=this.game.width,i=this.game.height;this.top=new c.default(this.game,t/2,i-i/4,0,t-t/3,90,this.sideCG,[this.bubbleCG,this.sideCG]),this.boundaries.add(this.top),this.game.add.existing(this.top),this.flippersEnabled=!1,this.resetLeftFlipper(),this.resetRightFlipper(),this.game.time.events.add(500,function(){e.sidesAreFlippers=!1},this)}},{key:"setupUnBonusRound",value:function(){this.resetBonusConditions()}},{key:"resetBubblesBonusCollisions",value:function(){var e=this;this.bubbles.forEach(function(t){t.body.createBodyCallback(e.eyelid1,e.hitBonus,e),t.body.createBodyCallback(e.eyelid2,e.hitBonus,e),t.body.createBodyCallback(e.eyelid3,e.hitBonus,e)},this)}},{key:"hitEyes",value:function(e,t){this.p1.play(),e.sprite.beingDragged&&this.stopDrag(e.sprite.dragPointerId),t.sprite===this.leftEye?this.addPoints(e.sprite.number,e.sprite.tint,!1):this.addPoints(e.sprite.number,e.sprite.tint,!0),2===e.sprite.number||"green"!==e.sprite.color&&"purple"!==e.sprite.color?e.sprite.number>2&&"clear"!==e.sprite.color?(e.sprite.number--,e.sprite.label.text=e.sprite.number):(e.sprite.label.text="",e.sprite.destroy()):(e.sprite.number/=2,e.sprite.label.text=e.sprite.number,this.createBubble(e.x,e.y,e.velocity.x,e.velocity.y,e.sprite.tint,e.sprite.number))}},{key:"hitNose",value:function(e,t){this.p2.play(),null!=e.sprite&&e.sprite.beingDragged&&this.stopDrag(e.sprite.dragPointerId)}},{key:"hitBonus",value:function(e,t){if(e.sprite.beingDragged&&this.stopDrag(e.sprite.dragPointerId),t.sprite===this.midBonus){if(this.noseClippingTimeout)return;this.midBonusActive&&(this.bonusNumber.text=this.midBonusNumber-=e.sprite.number,e.sprite.label.text="",e.sprite.destroy(),0===this.midBonusNumber&&this.setupBonusRound(),this.midBonusNumber<0&&this.setupUnBonusRound())}else t.sprite[e.sprite.color]=!0,t.sprite.blue&&t.sprite.red&&t.sprite.green&&t.sprite.destroy(),this.topBonuses.length||this.setupBonusConditions()}},{key:"cancelMovement",value:function(e,t){var i=this;this.noseClippingTimeout=!0,this.game.time.events.add(400,function(){i.noseClippingTimeout=!1},this)}},{key:"addPoints",value:function(e,t,i){i&&(e*=-1),6713343===t?i?this.rightScore+=e:this.leftScore+=e:16737894===t?i?this.rightScore-=e:this.leftScore-=e:65331===t?(i?this.leftScore+=e:this.leftScore+=e+e,i?this.rightScore-=e+e:this.rightScore-=e):5574543===t?(this.leftScore+=e,this.rightScore-=e+e):i?this.rightScore-=e:this.leftScore+=e,this.scoreDisplayLeft.text=this.leftScore,this.scoreDisplayRight.text=this.rightScore}}]),t}(Phaser.State);i.default=m},{"../prefabs/body":2,"../prefabs/bonus":3,"../prefabs/bubble":4,"../prefabs/side":5,"../prefabs/smile":6}],9:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),r(t,[{key:"create",value:function(){var e=this.add.text(.5*this.game.width,.5*this.game.height,"Gameover",{font:"42px Arial",fill:"#ffffff",align:"center"});e.anchor.set(.5),this.saveVarsToLocalStorage(),this.input.onDown.add(this.restartGame,this)}},{key:"saveVarsToLocalStorage",value:function(){}},{key:"resetGlobalVariables",value:function(){}},{key:"update",value:function(){}},{key:"restartGame",value:function(){this.resetGlobalVariables(),this.game.state.start("menu")}}]),t}(Phaser.State);i.default=a},{}],10:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(e){function t(){return s(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return n(t,e),r(t,[{key:"create",value:function(){var e=this.add.text(.5*this.game.width,.5*this.game.height,"MENU",{font:"42px Arial",fill:"#ffffff",align:"center"});e.anchor.set(.5),this.input.onDown.add(this.startGame,this)}},{key:"update",value:function(){}},{key:"startGame",value:function(){this.game.state.start("game")}}]),t}(Phaser.State);i.default=a},{}],11:[function(e,t,i){"use strict";function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function e(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(t,i,s){return i&&e(t.prototype,i),s&&e(t,s),t}}(),a=function(e){function t(){s(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.asset=null,e.ready=!1,e}return n(t,e),r(t,[{key:"preload",value:function(){this.asset=this.add.sprite(.5*this.game.width-110,.5*this.game.height-10,"preloader"),this.load.setPreloadSprite(this.asset),this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.loadResources()}},{
key:"update",value:function(){this.ready&&this.game.state.start("game")}},{key:"loadResources",value:function(){this.game.load.image("bubble","../assets/mathbubble/bubble.png"),this.game.load.image("r","../assets/mathbubble/bumper_1.png"),this.game.load.image("side","../assets/mathbubble/side.png"),this.game.load.image("bott","../assets/mathbubble/bottom.png"),this.game.load.image("left","../assets/mathbubble/left_eye.png"),this.game.load.image("right","../assets/mathbubble/right_eye.png"),this.game.load.audio("ping1","../assets/mathbubble/ping_high01.mp3"),this.game.load.audio("ping2","../assets/mathbubble/ping_high02.mp3"),this.game.load.audio("ping3","../assets/mathbubble/ping_high03.mp3")}},{key:"onLoadComplete",value:function(){this.ready=!0}}]),t}(Phaser.State);i.default=a},{}]},{},[1]);
